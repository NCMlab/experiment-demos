<!DOCTYPE html>
<html>
  <head>
    <script src="jsPsych/jspsych.js"></script>
    <script src="jsPsych/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="BeckDepIndex.js"></script>
    <link rel="stylesheet" href="jsPsych/css/jspsych.css">

  </head>
  <body></body>
  <script>

  // definiting two different response scales that can be used.


  var multi_choice_block = {
    type: 'survey-multi-choice',
    questions: items,
    on_finish: function(data){
      var Sum = 0;
          var MissedQuestions = 0
          var count = 0;
          console.log(Object.entries(jsPsych.data.getLastTrialData().values()[0].response))
          // cycle over each entry in teh object that holds the likert scale and responses
          for (const [key, value] of Object.entries(jsPsych.data.getLastTrialData().values()[0].response)) 
            console.log(key)
          console.log(value)
            {   // Check to see if any questions were not answers. If so then score them as a zero.
                if (value === "")
                {
                    Sum += 0
                    // Keep track of how many questions were missed
                    MissedQuestions += 1
                }
                else
                {
                    Sum += value + 1
                }
            }
          data.Sum = Sum
          data.NumberMissedQuestions = MissedQuestions
    }
  }

  

  jsPsych.init({
    timeline: [multi_choice_block],
    on_finish: function() {
      jsPsych.data.displayData();
    }
  });


  </script>
</html>
