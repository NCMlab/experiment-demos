<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="jsPsych Stroop: Word Task">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="Jason Steffener, NCMLab">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stroop: Word</title>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-fullscreen.js"></script>
    <script src="jspsych/plugins/jspsych-instructions.js"></script>    
    
    <link href="jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
    <style>
      .stimulus { font-size: 45; }
      .jspsych-html-keyboard-response-stimulus {font-size: 45;}
      .jspsych-display-element {
        font-family: 'Open Sans', 'Arial', sans-serif;
        font-size: 72px;
        line-height: 0.85em;
      }
    </style>
  </head>
  <script>
	/*<?php
		$post_data = json_decode(file_get_contents('php://input'), true); 
		// the directory "data" must be writable by the server
		$name = "data/".$post_data['filename'].".csv"; 
		$data = $post_data['filedata'];
		// write the file to disk
		file_put_contents($name, $data);
		?>*/

    /* create timeline */

    var timeline = [];
    // create the flankers
    // the number of flanking arrows is adjustable
    var NFlankers = 3;
    var flankersR = '';
    var flankersL = '';
    for (i = 0; i < NFlankers; i++) {
      flankersR += ">";
      flankersL += "<";
    }
  //https://www.webnots.com/keyboard-shortcuts-for-asterisk-symbol/
    var fixation = [
      {
        stimulus: "\u2217<br>+<br>\u2217",
        data: {stim_type: "top bot"}
      },
      {
        stimulus: " <br>+<br>\u2217",
        data: {stim_type: "bot"}
      }
      ]

    var test_stimuli = [
        {
            stimulus: flankersL + "<" + flankersL,
            //stimulus: "\u2217<br>+<br>\u2217",
            data: { stim_type: 'congruent', direction: 'left'}
          },
          {
            stimulus: flankersR + ">" + flankersR,
            data: { stim_type: 'congruent', direction: 'right'}
          },
          {
            stimulus: flankersL + ">" + flankersL,
            data: { stim_type: 'incongruent', direction: 'right'}
          },
          {
            stimulus: flankersR + "<" + flankersR,
            data: { stim_type: 'incongruent', direction: 'left'}
        }
    ];
        var test = {
          timeline: [{
            type: 'html-keyboard-response',
            choices: ['ArrowLeft', 'ArrowRight'],
            trial_duration: 1500,
            stimulus: jsPsych.timelineVariable('stimulus'),
            data: jsPsych.timelineVariable('data')
          }],
          timeline_variables: test_stimuli,
          sample: {type: 'fixed-repetitions', size: 3}
        };
    timeline.push(test)


    /* start the experiment */
    //jatos.onLoad(function() {
    jsPsych.init({
        experiment_width: 600,
        timeline: timeline
      })
  </script>
</html>