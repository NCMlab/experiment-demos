<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="jsPsych ANT">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="Jason Steffener, NCMLab">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANT</title>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-fullscreen.js"></script>
    <script src="jspsych/plugins/jspsych-instructions.js"></script>    
    <script src="Setup_EN.js"></script>
    <link href="jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
    <style>
      .stimulus { font-size: 45; }
      .jspsych-html-keyboard-response-stimulus {font-size: 45;}
      .jspsych-display-element {
        font-family: 'Open Sans', 'Arial', sans-serif;
        font-size: 72px;
        line-height: 0.85em;
      }
      table.a {
        table-layout: fixed; 
        width:480px;
        height: 400px;
        margin-left:auto;
        margin-right:auto;
      }  

    </style>
  </head>
  <script>
/* create timeline */
    var timeline = [];

    var Stimulus = {
      type: 'html-keyboard-response',
      stimulus: function() {
        var StimulusLetters = jsPsych.timelineVariable("StimulusLetters")
        return PutLettersInGrid(StimulusLetters,3,3, 700,20,60)
        //return StimulusLetters
      },
      trial_duration: 100,
      choices: jsPsych.NO_KEYS,
      on_finish: function(data){
        data.Stimulus:StimulusLetters,
        data.trialType = "Stimulus"
        }
      }

    var Retention = {
      // Each trial also has its own specific cue which occurs BEFORE the stimulus presentation
      // The cue itself is actually made in the setup file and not here. This could be changed if desired
      type: 'html-keyboard-response',
      stimulus: '<p style="color:black">+</p>',
      choices: jsPsych.NO_KEYS,
      trial_duration: 100,
      on_finish: function(data){
        data.trialType = "Retention"
      }
    } 
    
    var Probe = {
      type: 'html-keyboard-response',
      stimulus: function() {
        var ProbeLetter = jsPsych.timelineVariable("ProbeLetter")
        return ProbeLetter
        //return StimulusLetters
      },
      choices: KeyboardChoices,
      on_finish: function(data){
        data.trialType = "Probe"
        }
    }

    var Fix = {
      // Each trial also has its own specific cue which occurs BEFORE the stimulus presentation
      // The cue itself is actually made in the setup file and not here. This could be changed if desired
      type: 'html-keyboard-response',
      stimulus: '<p style="color:blue">+</p>',
      choices: jsPsych.NO_KEYS,
      trial_duration: 100,
      on_finish: function(data){
        data.trialType = "fixation"
      }
      
    } 
    var test_procedure = {
      // Make sure this order is correct: fixation cue and then the stimulus
      // Otherwise the scoring will not make any sense
      timeline: [Fix, Stimulus, Retention, Probe],
      timeline_variables: DMSLetterBehaviorList001,
      randomize_order: false  
    };

    timeline.push(test_procedure)
    /* start the experiment */
    //jatos.onLoad(function() {
    jsPsych.init({
        experiment_width: 600,
        timeline: timeline,
        on_finish: function() {
          jsPsych.data.get().localSave('csv','DMSMydata.csv');
        }
      })
  </script>
</html>